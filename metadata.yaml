# Copyright 2024 Canonical Ltd.
# See LICENSE file for licensing details.
name: mlmd
summary: Record and retrieve metadata associated with ML workflows
description: |
  The ML Metadata operator provides means to store runtime information of a pipeline run in a
  Metadata store. This information includes status of a task, availability of artifacts, custom properties, etc.
  More info in https://github.com/google/ml-metadata/blob/master/g3doc/get_started.md
containers:
  mlmd-grpc-server:
    resource: oci-image
    uid: 584792
    gid: 584792
    mounts:
      - storage: mlmd-data
        location: /data
resources:
  oci-image:
    type: oci-image
    description: Backing OCI image
    auto-fetch: true
    upstream-source: docker.io/charmedkubeflow/ml-metadata:1.17.1-c330e72
provides:
  grpc:
    interface: k8s-service
  velero-backup-config:
    interface: velero_backup_config
requires:
  logging:
    interface: loki_push_api
    optional: true
storage:
  mlmd-data:
    type: filesystem
    minimum-size: 10G
charm-user: non-root
